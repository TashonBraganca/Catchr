var O=Object.defineProperty;var U=(i,t,r)=>t in i?O(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var w=(i,t,r)=>U(i,typeof t!="symbol"?t+"":t,r);import{c,r as b,j as e,m as A}from"./index-CsoB02sa.js";import{G as T,A as G,a as M,b as v}from"./index-BTNGVNNo.js";/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=c("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=c("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=c("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=c("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=c("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=c("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=c("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=c("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=c("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=c("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_="http://localhost:5004";class Q{constructor(t=_){w(this,"baseUrl");w(this,"authToken",null);this.baseUrl=t}setAuthToken(t){this.authToken=t}clearAuthToken(){this.authToken=null}async request(t,r={}){const{method:o="GET",headers:d={},body:y}=r,h={"Content-Type":"application/json",...d};this.authToken&&(h.Authorization=`Bearer ${this.authToken}`);const p={method:o,headers:h};y&&o!=="GET"&&(p.body=JSON.stringify(y));try{const l=await fetch(`${this.baseUrl}${t}`,p),g=await l.json();if(!l.ok)throw new Error(g.message||`HTTP ${l.status}`);return g}catch(l){return console.error(`API Error (${o} ${t}):`,l),{status:"error",error:l instanceof Error?l.message:"Unknown error"}}}async healthCheck(){return this.request("/health")}async getApiTest(){return this.request("/api/test")}async register(t){return this.request("/api/auth/register",{method:"POST",body:t})}async login(t){return this.request("/api/auth/login",{method:"POST",body:t})}async refreshToken(t){return this.request("/api/auth/refresh",{method:"POST",body:{token:t}})}async getCurrentUser(){return this.request("/api/auth/me")}async createCapture(t){return this.request("/api/capture",{method:"POST",body:t})}async getCaptures(t){const r=t?"?"+new URLSearchParams(Object.entries(t).map(([o,d])=>[o,String(d)])).toString():"";return this.request(`/api/capture${r}`)}async getCaptureById(t){return this.request(`/api/capture/${t}`)}async updateCapture(t,r){return this.request(`/api/capture/${t}`,{method:"PUT",body:r})}async deleteCapture(t){return this.request(`/api/capture/${t}`,{method:"DELETE"})}async transcribeAudio(t){return this.request("/api/capture/transcribe",{method:"POST",body:t})}async syncCaptures(t){return this.request("/api/capture/sync",{method:"POST",body:{captures:t}})}async getQueueStatus(){return this.request("/api/capture/queue/status")}async transcribeAudioFile(t){return this.request("/api/transcription/audio",{method:"POST",body:{audio_data:t}})}async batchTranscribe(t){return this.request("/api/transcription/batch",{method:"POST",body:{files:t}})}async getRooms(){return this.request("/api/rooms")}async createRoom(t){return this.request("/api/rooms",{method:"POST",body:t})}async getRoomById(t){return this.request(`/api/rooms/${t}`)}async getRoomMessages(t,r){const o=r?`?limit=${r}`:"";return this.request(`/api/rooms/${t}/messages${o}`)}}const n=new Q,Z=()=>{const[i,t]=b.useState([]),[r,o]=b.useState(null),[d,y]=b.useState(""),h=[{id:"health",name:"Health Check",endpoint:"/health",method:"GET"},{id:"api-test",name:"API Test Endpoint",endpoint:"/api/test",method:"GET"},{id:"register",name:"User Registration",endpoint:"/api/auth/register",method:"POST"},{id:"login",name:"User Login",endpoint:"/api/auth/login",method:"POST"},{id:"refresh",name:"Refresh Token",endpoint:"/api/auth/refresh",method:"POST"},{id:"me",name:"Get Current User",endpoint:"/api/auth/me",method:"GET"},{id:"create-capture",name:"Create Capture",endpoint:"/api/capture",method:"POST"},{id:"get-captures",name:"Get Captures",endpoint:"/api/capture",method:"GET"},{id:"queue-status",name:"Queue Status",endpoint:"/api/capture/queue/status",method:"GET"},{id:"transcribe",name:"Transcribe Audio",endpoint:"/api/capture/transcribe",method:"POST"},{id:"get-rooms",name:"Get Rooms",endpoint:"/api/rooms",method:"GET"},{id:"create-room",name:"Create Room",endpoint:"/api/rooms",method:"POST"}];b.useEffect(()=>{t(h.map(s=>({...s,status:"pending"})))},[]);const p=async s=>{if(r)return;o(s);const m=Date.now();t(a=>a.map(u=>u.id===s?{...u,status:"running"}:u));try{let a,u;switch(d&&n.setAuthToken(d),s){case"health":a=await n.healthCheck();break;case"api-test":a=await n.getApiTest();break;case"register":a=await n.register({username:"testuser",email:"test@example.com",password:"testpassword123"});break;case"login":a=await n.login({email:"test@example.com",password:"testpassword123"});break;case"refresh":a=await n.refreshToken("mock-refresh-token");break;case"me":a=await n.getCurrentUser();break;case"create-capture":a=await n.createCapture({content:"This is a test thought for API testing",type:"note",tags:["test","api"]});break;case"get-captures":a=await n.getCaptures({limit:10});break;case"queue-status":a=await n.getQueueStatus();break;case"transcribe":a=await n.transcribeAudio({audio_data:"mock-audio-data-base64",content_type:"audio/webm"});break;case"get-rooms":a=await n.getRooms();break;case"create-room":a=await n.createRoom({name:"Test Room",creatorId:"test-user-123"});break;default:throw new Error("Unknown test")}const f=Date.now()-m,j=a.error?"error":"success";t(x=>x.map(k=>k.id===s?{...k,status:j,response:a,error:a.error,duration:f}:k))}catch(a){const u=Date.now()-m,f=a instanceof Error?a.message:"Unknown error";t(j=>j.map(x=>x.id===s?{...x,status:"error",error:f,duration:u}:x))}finally{o(null)}},l=async()=>{for(const s of h)await p(s.id),await new Promise(m=>setTimeout(m,500))},g=s=>{switch(s){case"success":return e.jsx(I,{className:"w-5 h-5 text-green-400"});case"error":return e.jsx(z,{className:"w-5 h-5 text-red-400"});case"running":return e.jsx(S,{className:"w-5 h-5 text-orange-primary animate-spin"});default:return e.jsx(S,{className:"w-5 h-5 text-white/40"})}},R=s=>s.includes("/auth")?e.jsx(V,{className:"w-4 h-4"}):s.includes("/capture")?e.jsx(L,{className:"w-4 h-4"}):s.includes("/transcription")?e.jsx(H,{className:"w-4 h-4"}):s.includes("/rooms")?e.jsx(D,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"}),E=()=>{window.history.back()},N=i.filter(s=>s.status==="success").length,C=i.filter(s=>s.status==="error").length,q=i.length;return e.jsx("div",{className:"min-h-screen bg-background-primary p-4 sm:p-6 font-primary",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx(T,{variant:"light",size:"sm",onClick:E,leftIcon:e.jsx(G,{className:"w-4 h-4"}),children:"Back"}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs text-text-tertiary",children:[N," success â€¢ ",C," errors â€¢ ",q," total"]})})]}),e.jsxs(A.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold text-text-primary mb-4 text-text-orange-glow",children:"ðŸ”§ API Testing Dashboard"}),e.jsx("p",{className:"text-text-secondary text-lg mb-6",children:"Test all Cathcr API endpoints and verify functionality"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-6",children:[e.jsx(M,{placeholder:"Auth Token (optional)",value:d,onChange:s=>y(s.target.value),className:"max-w-md",variant:"primary"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(T,{variant:"premium",onClick:l,disabled:!!r,leftIcon:e.jsx(P,{className:"w-4 h-4"}),children:"Run All Tests"})})]})]}),e.jsxs(v,{variant:"premium",className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"API Server Status"}),e.jsxs("div",{className:"flex items-center space-x-2 text-emerald-400",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Connected to localhost:5002"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-glass-orange-10 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:N}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Successful"})]}),e.jsxs("div",{className:"text-center p-4 bg-glass-orange-10 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:C}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Failed"})]}),e.jsxs("div",{className:"text-center p-4 bg-glass-orange-10 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-primary",children:q}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Total Tests"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:i.map((s,m)=>e.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},children:e.jsxs(v,{variant:"medium",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center space-x-2 text-text-orange-bright",children:R(s.endpoint)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-text-primary",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-text-secondary",children:[e.jsx("span",{className:"px-2 py-1 bg-glass-orange-20 rounded text-xs font-mono",children:s.method}),e.jsx("span",{className:"font-mono",children:s.endpoint})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[s.duration&&e.jsxs("span",{className:"text-xs text-text-tertiary",children:[s.duration,"ms"]}),g(s.status),e.jsx(T,{size:"sm",variant:"minimal",onClick:()=>p(s.id),disabled:r===s.id,leftIcon:e.jsx(P,{className:"w-3 h-3"}),children:r===s.id?"Running...":"Test"})]})]}),(s.response||s.error)&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(B,{className:"w-4 h-4 text-text-orange-bright"}),e.jsx("span",{className:"text-sm font-semibold text-text-orange-bright",children:s.status==="error"?"Error":"Response"})]}),e.jsx("div",{className:"bg-background-secondary rounded-lg p-3 overflow-auto max-h-48",children:e.jsx("pre",{className:"text-xs text-text-primary font-mono",children:s.error?s.error:JSON.stringify(s.response,null,2)})})]})]})},s.id))}),e.jsxs(v,{variant:"minimal",className:"mt-8 border-border-glass-light",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary mb-4",children:"ðŸ“– How to Use"}),e.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[e.jsx("p",{children:'â€¢ Click individual "Test" buttons to test specific endpoints'}),e.jsx("p",{children:'â€¢ Use "Run All Tests" to test all endpoints sequentially'}),e.jsx("p",{children:"â€¢ Add an auth token in the input field to test authenticated endpoints"}),e.jsx("p",{children:"â€¢ Green checkmarks indicate successful responses"}),e.jsx("p",{children:"â€¢ Red X marks indicate errors or failed requests"}),e.jsx("p",{children:"â€¢ Response data is displayed below each test for inspection"})]})]})]})})};export{Z as default};
//# sourceMappingURL=ApiTestPage-D-J5m6tb.js.map
